{% extends "base.html" %}
{% load url from future %}
{% load humanize %}

{% block javascript_extra %}
<script type='text/javascript' src='{{ STATIC_URL }}js/jquery.sparkline.min.js'></script>
<script type='text/javascript'>
    $(function() {
        $('.inlinesparkline').sparkline(); 
    });
</script>
{% endblock javascript_extra %}

{% block content %}

<div class='page-header'>
    <h1>welcome.</h1>
</div>

<div class='row'>
    <div class='span4'>
        <h1><a href='{% url "tweets" %}'>{{ item_count|intcomma }} items</a></h1>
        <h1>from <a href='{% url "users_alpha" %}'>{{ users.count|intcomma }} users</a></h1>

        {% if users_alpha %}
        <p />
        <h3>a sampling:</h3>
        <div class='well'>
            {% for user in users_alpha %}
                <a href='{% url "twitter_user" user.name %}'>{{ user.name }}</a>
                {% if forloop.last %}
                {% else %}
                    &middot;
                {% endif %}
            {% endfor %}
        </div>
        {% endif %}
    </div>

    {% if items %}
    <div class='span8'>
        <h1>recent tweets</h1>
        <table class='table'>
            <thead>
                <tr>
                    <th>user</th>
                    <th>date</th>
                    <th>text</th>
                </tr>
            </thead>
            <tbody>
                {% for item in items %}
                <tr>
                    <td><a href='{% url "twitter_user" item.twitter_user.name %}'>{{ item.twitter_user.name }}</a></td>
                    <td>{{ item.date_published }}</td>
                    <td>{{ item.tweet.text }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}
</div>

{% endblock %}
